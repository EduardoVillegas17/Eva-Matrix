"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Forward = void 0;
const chatGetter_1 = require("./chatGetter");
const senderGetter_1 = require("./senderGetter");
const Helpers_1 = require("../../Helpers");
const Utils_1 = require("../../Utils");
class Forward {
    constructor(client, original, entities) {
        // Copy all objects here. probably need a better way tho. PRs are welcome
        Object.assign(this, original);
        this.originalFwd = original;
        let senderId = undefined;
        let sender = undefined;
        let inputSender = undefined;
        let peer = undefined;
        let chat = undefined;
        let inputChat = undefined;
        if (original.fromId) {
            const ty = Helpers_1._entityType(original.fromId);
            if (ty === Helpers_1._EntityType.USER) {
                senderId = Utils_1.getPeerId(original.fromId);
                [sender, inputSender] = Utils_1._getEntityPair(senderId, entities, client._entityCache);
            }
            else if (ty === Helpers_1._EntityType.CHANNEL || ty === Helpers_1._EntityType.CHAT) {
                peer = original.fromId;
                [chat, inputChat] = Utils_1._getEntityPair(Utils_1.getPeerId(peer), entities, client._entityCache);
            }
        }
        chatGetter_1.ChatGetter.initClass(this, {
            chatPeer: peer,
            inputChat: inputChat,
        });
        senderGetter_1.SenderGetter.initClass(this, {
            senderId: senderId,
            sender: sender,
            inputSender: inputSender,
        });
        this._client = client;
    }
}
exports.Forward = Forward;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9yd2FyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dyYW1qcy90bC9jdXN0b20vZm9yd2FyZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBMEM7QUFDMUMsaURBQThDO0FBSTlDLDJDQUF5RDtBQUN6RCx1Q0FBd0Q7QUFFeEQsTUFBYSxPQUFPO0lBR2hCLFlBQ0ksTUFBc0IsRUFDdEIsUUFBOEIsRUFDOUIsUUFBNkI7UUFFN0IseUVBQXlFO1FBQ3pFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBRTVCLElBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQztRQUN6QixJQUFJLE1BQU0sR0FBRyxTQUFTLENBQUM7UUFDdkIsSUFBSSxXQUFXLEdBQUcsU0FBUyxDQUFDO1FBQzVCLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQztRQUNyQixJQUFJLElBQUksR0FBRyxTQUFTLENBQUM7UUFDckIsSUFBSSxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzFCLElBQUksUUFBUSxDQUFDLE1BQU0sRUFBRTtZQUNqQixNQUFNLEVBQUUsR0FBRyxxQkFBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QyxJQUFJLEVBQUUsS0FBSyxxQkFBVyxDQUFDLElBQUksRUFBRTtnQkFDekIsUUFBUSxHQUFHLGlCQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUN0QyxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxzQkFBYyxDQUNsQyxRQUFRLEVBQ1IsUUFBUSxFQUNSLE1BQU0sQ0FBQyxZQUFZLENBQ3RCLENBQUM7YUFDTDtpQkFBTSxJQUFJLEVBQUUsS0FBSyxxQkFBVyxDQUFDLE9BQU8sSUFBSSxFQUFFLEtBQUsscUJBQVcsQ0FBQyxJQUFJLEVBQUU7Z0JBQzlELElBQUksR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO2dCQUN2QixDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsR0FBRyxzQkFBYyxDQUM5QixpQkFBUyxDQUFDLElBQUksQ0FBQyxFQUNmLFFBQVEsRUFDUixNQUFNLENBQUMsWUFBWSxDQUN0QixDQUFDO2FBQ0w7U0FDSjtRQUNELHVCQUFVLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtZQUN2QixRQUFRLEVBQUUsSUFBSTtZQUNkLFNBQVMsRUFBRSxTQUFTO1NBQ3ZCLENBQUMsQ0FBQztRQUNILDJCQUFZLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtZQUN6QixRQUFRLEVBQUUsUUFBUTtZQUNsQixNQUFNLEVBQUUsTUFBTTtZQUNkLFdBQVcsRUFBRSxXQUFXO1NBQzNCLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBQzFCLENBQUM7Q0FDSjtBQS9DRCwwQkErQ0MifQ==